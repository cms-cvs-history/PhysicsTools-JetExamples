process testJET = {

   include "FWCore/MessageService/data/MessageLogger.cfi"
#   replace MessageLogger.destinations = { "debugmessages.txt" }
   replace MessageLogger.destinations = {"cout"}
# "ERROR" can be changed to "DEBUG" to see more output on the screen
   replace MessageLogger.cout = { untracked string threshold = "DEBUG" }

   untracked PSet maxEvents = {untracked int32 input = -1}

# OK for running at CERN
  source = PoolSource {
    untracked vstring fileNames = {
#      '/store/RelVal/2007/9/29/RelVal-RelValTTbar-1191056765/0000/166C4CA9-D66E-DC11-85EE-000423DCF0D8.root'
       '/store/mc/2007/12/2/RelVal-RelValTTbar-1196589957/0000/00EC8DE6-2EA1-DC11-B8F7-003048562A96.root'
     }
  }

include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

# print the event
#  module printTree = ParticleListDrawer {
#    untracked int32 maxEventsToPrint = 3
#  }

# select the partons for the matching
  module myPartons = PartonSelector{
     bool withLeptons = false
  }

# look for Flavour truth from MC
  module flavourByRef = JetPartonMatcher{
    InputTag jets              = iterativeCone5CaloJets
    InputTag partons           = myPartons
    double coneSizeToAssociate = 0.3  
  }

# look for Flavour truth from MC 
  module flavourByVal = JetFlavourIdentifier{
    InputTag srcByReference = flavourByRef
    bool physicsDefinition     = false
  }

# the anlyzer to print Jet Flavour info
  module printEvent = printJetFlavour {
    InputTag srcSelectedPartons = myPartons
    InputTag srcByReference     = flavourByRef
    InputTag srcByValue         = flavourByVal
}

  module printEventNumber = AsciiOutputModule { }
  path p = { 
#          printTree, 
             myPartons, 
             flavourByRef, 
             flavourByVal, 
             printEvent }

# Now order modules for execution
  endpath outpath = {printEventNumber}

}

