process testJET = {

   include "FWCore/MessageService/data/MessageLogger.cfi"
   replace MessageLogger.cerr.default.limit = 1

   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   untracked PSet maxEvents = {untracked int32 input = 1}

  source = PoolSource {
    untracked vstring fileNames = {
       '/store/mc/2007/11/20/RelVal-RelValTTbar-1195585246/0000/025C6F0B-3398-DC11-B9AD-000423D991F0.root'
     }
  }
  
# select partons instead of AllStable as jet inputs 
  module genParticlesPartons = GenParticleCandidateSelector {
   string src = "genParticleCandidates"
   bool stableOnly = false
   bool partons    = true
   untracked bool verbose = false
   vstring excludeList = {}
   vstring includeList = {}
  }

# produce the jets
  module partonJet = IterativeConeJetProducer {
    untracked string alias = "IC5PartonGenJet"
    untracked int32 debugLevel = 0
    double seedThreshold = 1.0
    double inputEtMin = 0.
    double inputEMin = 0.
    InputTag src = genParticlesPartons
    untracked string jetType = "GenJet"
    untracked bool verbose = false
    double coneRadius = 0.5
  }

# jets to candidate
  module GenJetCollectionClone = GenJetShallowCloneProducer{
    InputTag src = partonJet
  }

# jet selection (ptmin)
  module genJetSele = PtMinCandSelector{
    InputTag src = GenJetCollectionClone
    double ptMin        = 15.0
  }

# jets to candidate
  module caloJetCollectionClone = CaloJetShallowCloneProducer{
    InputTag src = iterativeCone5CaloJets
  }

# jet selection (ptMin)
  module caloJetSele = PtMinCandSelector{
    InputTag src = caloJetCollectionClone
    double ptMin        = 15.0
  }
    
# The matching routine OneToOne
  module jetMatchOne = CandOneToOneDeltaRMatcher {
    InputTag src      = genJetSele
    InputTag matched  = caloJetSele
    string algoMethod = "SwitchMode"
  }

  module printEvent = printPartonJet {
    InputTag src   = genJetSele
    InputTag map   = jetMatchOne:src2mtc
    untracked string HistOutFile = "myPlots.root"
  }

  module printEventNumber = AsciiOutputModule { }
  path p = {genParticlesPartons,partonJet,GenJetCollectionClone, genJetSele, caloJetCollectionClone, caloJetSele, jetMatchOne, printEvent }

# Now order modules for execution
  endpath outpath = {printEventNumber}

}

